
<!DOCTYPE html>

<head>


<!-- GA and Optimize code, 2018-05-17 -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-88343733-1', 'auto');
  ga('require', 'GTM-T8FGVH9');
  ga('send', 'pageview');
</script>


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-88343733-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-88343733-1');
</script>


<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TQBF9JG');</script>


<!-- Google fonts -->
<link href="https://fonts.googleapis.com/css?family=Alegreya|Lato&display=swap" rel="stylesheet">



    <meta charset="utf-8">

         <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
       Remove this if you use the .htaccess -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <meta name="google-site-verification" content="ZG9GiflU2GV39evj886BqIq1JNcay3vDlsMHCwK1l3c" />

  <title>UX Design · Photo · Travel · Trekking · Cycling</title>
  <meta name="description" content="Design portfolio and travel catalogue">
  <meta name="keywords" content="Andrew Day, user experience architecture, UX design, design direction, Chicago, Illinois, USA"  />
  <meta name="author" content="Andrew Day">

  <!--  Mobile viewport optimized: j.mp/bplateviewport -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Place favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
  <link rel="shortcut icon" href="favicon.png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">


<meta name="google-site-verification" content="-4qU3IFd_aP7Fv5oNqR3CwgBTVFck91NNaDskGI65EI" />


        <script src="http://cdn.kendostatic.com/2012.1.322/js/jquery.min.js" type="text/javascript"></script>
        <script src="http://cdn.kendostatic.com/2012.1.322/js/kendo.web.min.js" type="text/javascript"></script>
        <link href="http://cdn.kendostatic.com/2012.1.322/styles/kendo.common.min.css" rel="stylesheet" type="text/css" />
        <link href="http://cdn.kendostatic.com/2012.1.322/styles/kendo.default.min.css" rel="stylesheet" type="text/css" />


  <!-- CSS : implied media="all" -->
  <link rel="stylesheet" href="css/main.css">






        <style>

#container { padding-bottom:0 !important }

        </style>




    </head>


    <body>

<!-- Minimize flicker, 2018-05-17 -->
<style>.async-hide { opacity: 0 !important} </style>
<script>(function(a,s,y,n,c,h,i,d,e){s.className+=' '+y;h.start=1*new Date;
h.end=i=function(){s.className=s.className.replace(RegExp(' ?'+y),'')};
(a[n]=a[n]||[]).hide=h;setTimeout(function(){i();h.end=null},c);h.timeout=c;
})(window,document.documentElement,'async-hide','dataLayer',4000,
{'GTM-T8FGVH9':true});</script>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TQBF9JG"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->


<div id="container">

<header>

<nav>
<ul>
<li class="first selected">Viewfinder</li>
<li><a href="chronology.html">Itineraries</a></li>
<li><a href="map.html">Atlas</a></li>
<li><a href="scrapbook.html">S-crap-book</a></li>
<li><a href="cycling.html">Handlebars</a></li>
<li class="last"><a href="http://design.andrewday.com/">Design & UX →</a></li>
</ul>
</nav>



<h1>Andrew Day <span class="aboutme" style="padding-left:15px; white-space:nowrap;">UX designer · proud dad · daily cyclist · frequent flyer</span></h1>


</header>


<
<div id="picmenu" style="display:none;">

        <select class="k-select" id="tags"></select>

        <button class="k-button" id="update">yep</button>


</div><!-- end menu -->


</div><!-- container -->




       <div id="picstest"></div>

        <div id="pics"></div>
        <div id="loading">Loading...</div>



        <script type="text/javascript">

// Developed by Sam Judson, sam@wackylabs.net
// http://www.wackylabs.net
//
// This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License
// http://creativecommons.org/licenses/by-nc-sa/3.0/


$(document).ready(function() {

    // perform initial loading
    justifiedLayout.loadData();

    $("#update").click(justifiedLayout.loadData);

    $("#tags").keyup(function(event){
        if(event.keyCode == 13){
            $("#update").click();
        }
    });

    $("#sort").kendoDropDownList({
        change: justifiedLayout.loadData
    });

});

var justifiedLayout = {};

(function(context) {

    var minWidth = 800;
    var minHeight = 800;

    var lastWidth = 0;
    var photoArray = null;
    var maxPhotos = 30;
    // total number of images appearing in all previous rows
    var baseLine = 0;

    $(window).resize(function() {

        var nowWidth = $("div#picstest").innerWidth();
        if( nowWidth < minWidth ) return;

        // test to see if the window resize is big enough to deserve a reprocess
        if( nowWidth * 1.1 < lastWidth || nowWidth * 0.9 > lastWidth )
        {
            // if so call method
            updateRows();
        }
    });

    context.loadData = function() {
        photoArray = null;
        baseLine = 0;
        maxPhotos = 30;
        $("div#pics").empty();
        $("#loading").show();

        var tags = $("#tags").val();
        var sort = $("#sort").val();
        $.getJSON("https://api.flickr.com/services/rest/",
            {
                method: "flickr.photos.search",
                api_key: "d75b34b1afe5da8c8918eba885038682",
				user_id: "75751316@N00",
				tags: tags,
                tag_mode: "all",
                sort: "date-taken-desc",
                extras: "url_n,url_m,url_z,url_l",
                format: "json",
                per_page: 400,
                nojsoncallback: 1
            },
            function(data, status) {
                photoArray = data.photos.photo;
                updateRows();
                $("#loading").hide();
            }
        );
    };

    var clickHandler = function(photo)
        {
          return function() {
            var url = "https://www.flickr.com/photos/" + photo.owner + "/" + photo.id;
            location.href = url;
          };
        };

    // only call this when either the data is loaded, or the windows resizes by a chunk
    var updateRows = function() {
        lastWidth = $("div#picstest").innerWidth();
        lastWidth = Math.max(lastWidth, minWidth);
        baseLine = 0;
        processPhotos(photoArray);
        $("div.picrow").width(lastWidth);
    };

    var processPhotos = function(photos) {
        if (!photos) return;

        // divs to contain the images
        var d = $("div#pics");
        if( baseLine === 0 ) {
            d.empty();
        }

        // get row width - this is fixed.
        var w = lastWidth;

        // initial height - effectively the maximum height +/- 10%;
        var h = Math.max(minHeight,Math.floor(w / 5));
        // margin width
        var border = 5;

        // store relative widths of all images (scaled to match estimate height above)
        var ws = [];
        $.each(photos, function(key, val) {
            var wt = parseInt(val.width_n, 10);
            var ht = parseInt(val.height_n, 10);
            if( ht != h ) { wt = Math.floor(wt * (h / ht)); }
            ws.push(wt);
        });

        var rowNum = 0;
        var limit = Math.min(maxPhotos, photos.length);

        while(baseLine < limit)
        {
            rowNum++;
            // number of images appearing in this row
            var c = 0;
            // total width of images in this row - including margins
            var tw = 0;

            // calculate width of images and number of images to view in this row.
            while( (tw * 1.1 < w) && (baseLine + c < limit))
            {
                tw += ws[baseLine + c++] + border * 2;
            }

            // skip the last row
            if( baseLine + c >= limit ) return;

            var d_row = $("<div/>", {"class" : "picrow"});
            d.append(d_row);


            // Ratio of actual width of row to total width of images to be used.
            var r = w / tw;

            // image number being processed
            var i = 0;
            // reset total width to be total width of processed images
            tw = 0;
            // new height is not original height * ratio
            var ht = Math.floor(h * r);
            d_row.height(ht + border * 2);

            while( i < c )
            {
                var photo = photos[baseLine + i];
                // Calculate new width based on ratio
                var wt = Math.floor(ws[baseLine + i] * r);
                // add to total width with margins
                tw += wt + border * 2;

                // Create image, set src, width, height and margin
                var purl = photo.url_n;
                if( wt > photo.width_n * 1.2 || ht > photo.height_n * 1.2 ) purl = photo.url_m;
                if( wt > photo.width_m * 1.2 || ht > photo.height_m * 1.2 ) purl = photo.url_z;
                if( wt > photo.width_z * 1.2 || ht > photo.height_z * 1.2 ) purl = photo.url_l;

                var img = $(
                  '<img/>',
                  {
                      "class": "photo",
                      src: purl,
                      width: wt,
                      height: ht
                  }).css("margin", border + "px");

                img.click(clickHandler(photo));
                d_row.append(img);

                i++;
            }

            // set row height to actual height + margins
            baseLine += c;

            // if total width is slightly smaller than
            // actual div width then add 1 to each
            // photo width till they match
            i = 0;
            while( tw < w )
            {
                var img1 = d_row.find("img:nth-child(" + (i + 1) + ")");
                img1.width(img1.width() + 1);
                i = (i + 1) % c;
                tw++;
            }
            // if total width is slightly bigger than
            // actual div width then subtract 1 from each
            // photo width till they match
            i = 0;
            while( tw > w )
            {
                var img2 = d_row.find("img:nth-child(" + (i + 1) + ")");
                img2.width(img2.width() - 1);
                i = (i + 1) % c;
                tw--;
            }

        }
    };

    // levelReached function taken from infiniteScroll jquery plugin
    // https://github.com/holtonma/infini_scroll

    var levelReached = function(){
        // is it low enough to add elements to bottom?
        var pageHeight = Math.max(document.body.scrollHeight ||
        document.body.offsetHeight);
        var viewportHeight = window.innerHeight  ||
        document.documentElement.clientHeight  ||
        document.body.clientHeight || 0;
        var scrollHeight = window.pageYOffset ||
        document.documentElement.scrollTop  ||
        document.body.scrollTop || 0;
        // Trigger for scrolls within 20 pixels from page bottom
        return pageHeight - viewportHeight - scrollHeight < 10;
    };

    var pollLevel = function() {
        if( photoArray && levelReached() )
        {
            maxPhotos = Math.min(maxPhotos+30, 400);
            processPhotos(photoArray);
        }
        setTimeout(pollLevel, 100);
    };

    pollLevel();

})(justifiedLayout);

</script>



</body>

</html>
