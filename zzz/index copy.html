
<!DOCTYPE html>

<head>


<!-- GA and Optimize code, 2018-05-17 -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-88343733-1', 'auto');
  ga('require', 'GTM-T8FGVH9');
  ga('send', 'pageview');
</script>


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-88343733-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-88343733-1');
</script>


<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TQBF9JG');</script>


<!-- Google fonts -->
<link href="https://fonts.googleapis.com/css?family=Alegreya|Eczar|Lato&display=swap" rel="stylesheet">



    <meta charset="utf-8">

         <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
       Remove this if you use the .htaccess -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <meta name="google-site-verification" content="ZG9GiflU2GV39evj886BqIq1JNcay3vDlsMHCwK1l3c" />

  <title>UX Design · Photo · Travel · Trekking · Cycling</title>
  <meta name="description" content="Design portfolio and travel catalogue">
  <meta name="keywords" content="Andrew Day, user experience architecture, UX design, design direction, Chicago, Illinois, USA"  />
  <meta name="author" content="Andrew Day">

  <!--  Mobile viewport optimized: j.mp/bplateviewport -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Place favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
  <link rel="shortcut icon" href="favicon.png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">


<meta name="google-site-verification" content="-4qU3IFd_aP7Fv5oNqR3CwgBTVFck91NNaDskGI65EI" />


        <script src="http://cdn.kendostatic.com/2012.1.322/js/jquery.min.js" type="text/javascript"></script>
        <script src="http://cdn.kendostatic.com/2012.1.322/js/kendo.web.min.js" type="text/javascript"></script>
        <link href="http://cdn.kendostatic.com/2012.1.322/styles/kendo.common.min.css" rel="stylesheet" type="text/css" />
        <link href="http://cdn.kendostatic.com/2012.1.322/styles/kendo.default.min.css" rel="stylesheet" type="text/css" />


  <!-- CSS : implied media="all" -->
  <link rel="stylesheet" href="css/main.css">






        <style>

#container { padding-bottom:0 !important }

        </style>




    </head>


    <body>

<!-- Minimize flicker, 2018-05-17 -->
<style>.async-hide { opacity: 0 !important} </style>
<script>(function(a,s,y,n,c,h,i,d,e){s.className+=' '+y;h.start=1*new Date;
h.end=i=function(){s.className=s.className.replace(RegExp(' ?'+y),'')};
(a[n]=a[n]||[]).hide=h;setTimeout(function(){i();h.end=null},c);h.timeout=c;
})(window,document.documentElement,'async-hide','dataLayer',4000,
{'GTM-T8FGVH9':true});</script>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TQBF9JG"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->


<div id="container">

<header>

<nav>
<ul>
<li class="first selected">Viewfinder</li>
<li><a href="chronology.html">Itineraries</a></li>
<li><a href="map.html">Atlas</a></li>
<li><a href="scrapbook.html">S-crap-book</a></li>
<li><a href="cycling.html">Handlebars</a></li>
<li class="last"><a href="http://design.andrewday.com/">Design & UX →</a></li>
</ul>
</nav>



<h1>Andrew Day <span class="aboutme" style="padding-left:15px; white-space:nowrap;">UX designer · proud dad · daily cyclist · frequent flyer</span></h1>


</header>



<div id="picmenu">

        <select class="k-select" id="tags">

        <optgroup label="2016">
            <option value="" selected>Recent</option>
            <option value="ad2016-elise">Elise</option>
            <option value="ad2016-randoms">Randoms</option>
            <option value="ad2016-rome">Italy · Rome</option>
            <option value="ad2016-ireland">Ireland, Northern Ireland</option>
            <option value="ad2016-wilmington">Wilmington</option>
            <option value="ad2016-newyork">New York</option>
            <option value="ad2016-camping">Camping</option>
		</optgroup>

        <optgroup label="2015">
            <option value="ad2015-elise">Elise</option>
            <option value="ad2015-randoms">Randoms</option>
            <option value="ad2015-fosterville">Fosterville</option>
            <option value="ad2015-california">California · Bodega Bay, Guerneville, Healdsburg, San Francisco</option>
            <option value="ad2015-camping">Camping</option>
            <option value="ad2015-grandrapids">Grand Rapids</option>
            <option value="ad2015-mx-playa">Mexico · Playa, Tulum, Cobá, Chichen Itza</option>
		</optgroup>

        <optgroup label="2014">
            <option value="ad2014-elise">Elise</option>
            <option value="ad2014-randoms">Randoms</option>
            <option value="ad2014-fosterville">Fosterville</option>
            <option value="ad2014-05-michigan">Michigan weekends</option>
		</optgroup>

        <optgroup label="2013">
            <option value="ad2013-elise">Elise</option>
            <option value="ad2013-randoms">Randoms</option>
            <option value="ad2013-mx-bajacalifornia">Mexico · Baja California Sur</option>
            <option value="ad2013-08-michigan">Beachtown & Motown</option>
            <option value="ad2013-michconsin">Michconsin</option>
            <option value="ad2013-seattle">Seattle</option>
            <option value="ad2013-michigan">Michigan weekends</option>
            <option value="ad2013-mx-puertovallarta">Mexico · Puerto Vallarta, coast</option>
		</optgroup>

        <optgroup label="2012">
            <option value="ad2012-randoms">Randoms</option>
            <option value="ad2012-mx-mexicocity">Mexico · Mexico City</option>
            <option value="ad2012-es-barcelona">Spain · Barcelona</option>
            <option value="ad2012-ma-casablanca">Morocco · Casablanca</option>
            <option value="ad2012-ma-fes">Morocco · Fes, Meknes, Volubilis</option>
            <option value="ad2012-ma-marrakech">Morocco · Marrakech, Atlas Mountains</option>
            <option value="ad2012-ma-tangier">Spain/Morocco · Tarifa, Tangier</option>
            <option value="ad2012-gi-wedding">Gibraltar · Wedding</option>
            <option value="ad2012-gi-gibraltar">Spain/Gibraltar · Algeciras, Gibraltar</option>
            <option value="ad2012-es-toledo">Spain · Toledo, Cuenca</option>
            <option value="ad2012-pt-sagres">Portugal · Sagres, Costa Vicentina</option>
            <option value="ad2012-pt-evora">Portugal · Evora</option>
            <option value="ad2012-pt-nazare">Portugal · Nazaré, Alcobaça, Batalha, Tomar, Óbidos</option>
            <option value="ad2012-pt-coimbra">Portugal · Coimbra, Serra de Estrela, Piódão</option>
            <option value="ad2012-pt-douro">Portugal · Douro Valley</option>
            <option value="ad2012-pt-porto">Portugal · Porto</option>
            <option value="ad2012-pt-lisbon">Portugal · Lisbon, Sintra</option>
			<option value="ad2012-es-segovia">Spain · Segovia, Ávila, Sepúlveda</option>
			<option value="ad2012-es-leon">Spain · León, Oviedo, Salamanca, La Alberga</option>
			<option value="ad2012-es-picos">Spain · Picos de Europa</option>
			<option value="ad2012-es-sansebastian">Spain · San Sebastian, Bilbao, Santillana</option>
			<option value="ad2012-es-rioja">Spain · La Rioja, Olite, Pamplona</option>
			<option value="ad2012-es-madrid">Spain · Madrid</option>
			<option value="ad2012-newyork">New York</option>
			<option value="ad2012-ca-quebec">Canada · Québec City</option>
		</optgroup>

        <optgroup label="2011">
            <option value="ad2011-randoms">Randoms</option>
            <option value="ad2011-fr-aix">France · Aix-en-Provence, Lacoste, Roussillon, Saignon</option>
            <option value="ad2011-fr-arles">France · Arles, Avignon, L'isle-sur-la-Sorgue, Gordes, Bonnieux</option>
            <option value="ad2011-fr-saintremy">France · Grenoble, Saint-Rémy, Les Baux</option>
            <option value="ad2011-ch-bern">Switzerland · Bern, Neuchâtel, Lausanne</option>
            <option value="ad2011-ch-lucerne">Switzerland · Lucerne, Mt. Pilatus</option>
            <option value="ad2011-it-turin">Italy · Turin</option>
            <option value="ad2011-it-barolo">Italy · Barolo, Alba, Lake Como</option>
            <option value="ad2011-fr-nice">France · Nice, Monaco, Menton</option>
            <option value="ad2011-fr-cannes">France · Cannes, Gorges du Verdon, Saint-Paul, Antibes</option>
            <option value="ad2011-fr-marseille">France · Marseille, Cassis</option>
            <option value="ad2011-fr-lyon">France · Lyon</option>
            <option value="ad2011-fr-paris2">France · Paris II</option>
            <option value="ad2011-summer">Philadelphia, Michigan weekends</option>
            <option value="ad2011-mx-pacific">Mexico · Puerto Vallarta, coast</option>
            <option value="ad2011-mx-guadalajara">Mexico · Guadalajara</option>
            <option value="ad2011-fr-paris1">France · Paris I</option>
            <option value="ad2011-nl-haarlem">Netherlands · Utrecht, Haarlem, Den Haag, Leiden</option>
            <option value="ad2011-nl-amsterdam">Netherlands · Amsterdam</option>
            <option value="ad2011-mx-cozumel">Mexico · Cozumel</option>
        </optgroup>


        <optgroup label="2010">
            <option value="ad2010-randoms">Randoms</option>
            <option value="ad2010-jesse">Jesse</option>
            <option value="ad2010-portland">Portland, Seattle</option>
            <option value="ad2010-tucson">Phoenix, Tucson</option>
            <option value="ad2010-lt-vilnius">Lithuania, UK · Vilnius, Siauliai, Nida, London</option>
            <option value="2010-lv-riga">Latvia · Riga, Jurmala, Tukums, Kuldiga</option>
            <option value="ad2010-ee-tallinn">Estonia · Tallinn, Kuressaare, Parnu</option>
            <option value="ad2010-se-stockholm">Sweden · Stockholm, Uppsala</option>
            <option value="ad2010-se-gothenburg">Sweden · Malmö, Lund, Gothenburg</option>
            <option value="ad2010-no-lofthus">Norway · Lofthus, Fjaerland, Eidfjord</option>
            <option value="ad2010-no-balestrand">Norway · Balestrand, Bergen</option>
            <option value="ad2010-no-flam">Norway · Oslo, Myrdal, Flåm</option>
            <option value="ad2010-dk-copenhagen">Denmark · Copenhagen, Hillerød, Helsingør, Aarhus</option>
            <option value="ad2010-by-minsk">Belarus · Minsk, Brest</option>
            <option value="ad2010-ua-chernobyl">Ukraine · Chernobyl, Pripyat</option>
            <option value="ad2010-ua-kiev">Ukraine · Lviv, Kiev</option>
            <option value="ad2010-ua-crimea">Ukraine · Odessa, Simferopol, Sevastopol, Yalta, Balaklava</option>
            <option value="ad2010-ru-moscow">Russia · Moscow, Sergiev Posad</option>
            <option value="ad2010-ru-spb">Russia · St. Petersburg</option>
            <option value="ad2010-fi-helsinki">Finland · Helsinki, Porvoo</option>
            <option value="ad2010-stlouis">St. Louis, Hannibal</option>
		</optgroup>


        <optgroup label="2009">
            <option value="ad2009-randoms">Randoms</option>
            <option value="ad2009-jesse">Jesse</option>
            <option value="ad2009-ni-ometepe">Nicaragua · Ometepe</option>
            <option value="ad2009-ni-leon">Nicaragua · León, Masaya</option>
            <option value="ad2009-ni-granada">Nicaragua · Granada</option>
            <option value="ad2009-cr-liberia">Costa Rica · Liberia, Bahia Junquillal, Bahia Salinas</option>
            <option value="ad2009-cr-arenal">Costa Rica · San José, Arenal</option>
            <option value="ad2009-cr-drakebay">Costa Rica · Bahia Drake</option>
            <option value="ad2009-cr-pacuare">Costa Rica · Pacuare River</option>
            <option value="ad2009-newyork">New York</option>
            <option value="ad2009-meoqui">Meoqui graduation weekend</option>
            <option value="ad2009-aguaprieta">Phoenix, Agua Prieta</option>
            <option value="ad2009-summer">Kalamazoo, Grand Rapids, Ann Arbor</option>
            <option value="ad2009-ca-toronto">Canada · Toronto</option>
            <option value="ad2009-cu-havana2">Cuba · Havana II</option>
            <option value="ad2009-cu-santiago">Cuba · Santiago</option>
            <option value="ad2009-cu-holguin">Cuba · Holguín</option>
            <option value="ad2009-cu-camaguey">Cuba · Camagüey, Santa Lucia</option>
            <option value="ad2009-cu-trinidad">Cuba · Trinidad, Playa Ancon, Valle de los Ingenios</option>
            <option value="ad2009-cu-vinales">Cuba · Viñales, Maria La Gorda</option>
            <option value="ad2009-cu-havana1">Cuba · Havana I</option>
            <option value="ad2009-wisconsin">Milwaukee, Madison</option>
        </optgroup>


        <optgroup label="2008">
            <option value="ad2008-randoms">Randoms</option>
            <option value="ad2008-jesse">Jesse</option>
            <option value="ad2008-miami">Miami, Florida Keys</option>
            <option value="ad2008-in-varkala">India · Varkala</option>
            <option value="ad2008-in-backwaters">India · Alleppey, Backwaters</option>
            <option value="ad2008-in-munnar">India · Munnar, Chinnar</option>
            <option value="ad2008-in-kochi">India · Kochi</option>
            <option value="ad2008-in-andaman">India · Andaman Islands</option>
            <option value="ad2008-in-kolkata">India · Kolkata</option>
            <option value="ad2008-in-varanasi">India · Varanasi, Sarnath</option>
            <option value="ad2008-in-amritsar">India · Amritsar, Attari</option>
            <option value="ad2008-in-shimla">India · Shimla, Chandigarh</option>
            <option value="ad2008-in-delhi">India · Delhi</option>
            <option value="ad2008-in-agra">India · Agra, Fatehpur Sikri</option>
            <option value="ad2008-in-jaipur">India · Jaipur</option>
            <option value="ad2008-in-jodhpur">India · Jodhpur</option>
            <option value="ad2008-in-udaipur">India · Udaipur</option>
            <option value="ad2008-in-ellora">India · Aurangabad, Ellora Caves</option>
            <option value="ad2008-in-mumbai">India · Mumbai</option>
        </optgroup>


        <optgroup label="2007">
            <option value="ad2007-randoms">Randoms</option>
            <option value="ad2007-jesse">Jesse</option>
            <option value="ad2007-newyork">New York</option>
            <option value="ad2007-mx-morelia">Mexico · Morelia, Patzcuaro, Tzintzuntzan</option>
            <option value="ad2007-mx-sanmiguel">Mexico · San Miguel, Dolores Hidalgo</option>
            <option value="ad2007-mx-guanajuato">Mexico · Guanajuato, León</option>
            <option value="ad2007-pittsburgh">Pittsburgh</option>
            <option value="ad2007-tucson">Douglas, Tucson</option>
            <option value="ad2007-sanfrancisco">San Francisco</option>
            <option value="ad2007-ca-quebec">Canada · Québec City</option>
            <option value="ad2007-seattle">Seattle</option>
        </optgroup>


        <optgroup label="2006">
            <option value="ad2006-randoms">Randoms</option>
            <option value="ad2006-jesse">Jesse</option>
            <option value="ad2006-lasvegas">Las Vegas</option>
            <option value="ad2006-jp-tokyo2">Japan · Tokyo II</option>
            <option value="ad2006-jp-nara">Japan · Nara</option>
            <option value="ad2006-jp-hiroshima">Japan · Hiroshima</option>
            <option value="ad2006-jp-kyoto">Japan · Kyoto</option>
            <option value="ad2006-jp-nikko">Japan · Nikko</option>
            <option value="ad2006-jp-tokyo1">Japan · Tokyo I</option>
            <option value="ad2006-fr-paris">France · Paris</option>
            <option value="ad2006-il-hebron">Palisraeliestine · Hebron, Tel Aviv</option>
            <option value="ad2006-il-jerusalem">Palisraeliestine · Jerusalem</option>
            <option value="ad2006-jo-amman">Jordan · Aqaba, Mount Nebo, Madaba, Jerash, Amman</option>
            <option value="ad2006-jo-petra">Jordan · Petra</option>
            <option value="ad2006-om-nizwa">Oman · Nizwa, Bahla, Dibab</option>
            <option value="ad2006-om-muscat">Oman · Muscat</option>
            <option value="ad2006-ae-dubai">UAE · Dubai, Fujairah</option>
            <option value="ad2006-lb-tripoli">Lebanon · Tripoli, Byblos, Faraya-Mzaar, Jounieh</option>
            <option value="ad2006-lb-beirut">Lebanon · Beirut</option>
            <option value="ad2006-mt-valletta">Malta · Valletta, Dingli, St. Julian</option>
            <option value="ad2006-tn-sousse">Tunisia · Sousse, Monastir</option>
            <option value="ad2006-tn-tunis">Tunisia · Tunis, Carthage, Sidi Bou Saïd</option>
            <option value="ad2006-ma-casablanca">Morocco · Casablanca</option>
            <option value="ad2006-ma-fes">Morocco · Fés, Volubilis, Meknes</option>
            <option value="ad2006-ma-marrakech">Morocco · Marrakech, Ourika Valley</option>
        </optgroup>


        <optgroup label="...">
		</optgroup>


        <optgroup label="1983">
            <option value="ad1983-europe">Europe · England, France, etc.</option>
		</optgroup>



        <optgroup label="(map)...">
            <option value="argentina">Argentina</option>
            <option value="austria">Austria</option>
            <option value="belarus">Belarus</option>
            <option value="belgium">Belgium</option>
            <option value="brasil">Brazil</option>
            <option value="bulgaria">Bulgaria</option>
            <option value="canada">Canada</option>
            <option value="chile">Chile</option>
            <option value="costarica">Costa Rica</option>
            <option value="cuba">Cuba</option>
            <option value="czechrepublic">Czech Republic</option>
            <option value="denmark">Denmark</option>
            <option value="estonia">Estonia</option>
            <option value="finland">Finland</option>
            <option value="france">France</option>
            <option value="germany">Germany</option>
            <option value="greece">Greece</option>
            <option value="hongkong">Hong Kong</option>
            <option value="hungary">Hungary</option>
            <option value="india">India</option>
            <option value="israel">Israel</option>
            <option value="italy">Italy</option>
            <option value="japan">Japan</option>
            <option value="jordan">Jordan</option>
            <option value="latvia">Latvia</option>
            <option value="lithuania">Lithuania</option>
            <option value="lebanon">Lebanon</option>
            <option value="malaysia">Malaysia</option>
            <option value="malta">Malta</option>
            <option value="mexico">Mexico</option>
            <option value="monaco">Monaco</option>
            <option value="morocco">Morocco</option>
            <option value="netherlands">Netherlands</option>
            <option value="nicaragua">Nicaragua</option>
            <option value="norway">Norway</option>
            <option value="oman">Oman</option>
            <option value="palestine">Palestine</option>
            <option value="poland">Poland</option>
            <option value="puertorico">Puerto Rico</option>
            <option value="romania">Romania</option>
            <option value="russia">Russia</option>
            <option value="slovakia">Slovakia</option>
            <option value="spain">Spain</option>
            <option value="sweden">Sweden</option>
            <option value="switzerland">Switzerland</option>
            <option value="thailand">Thailand</option>
            <option value="tunisia">Tunisia</option>
            <option value="turkey">Turkey</option>
            <option value="unitedarabemirates">United Arab Emirates</option>
            <option value="unitedkingdom">United Kingdom</option>
            <option value="ukraine">Ukraine</option>
            <option value="uruguay">Uruguay</option>
            <option value="vietnam">Vietnam</option>
            <option value="">etc</option>
        </optgroup>


        <optgroup label="(folks)...">
            <option value="elise">Elise</option>
            <option value="sandra">Sandra</option>
            <option value="will">Will</option>
            <option value="jesse">Jesse</option>
            <option value="">etc</option>
        </optgroup>


</select>

        <button class="k-button" id="update">yep</button>


</div><!-- end menu -->


</div><!-- container -->




       <div id="picstest"></div>

        <div id="pics"></div>
        <div id="loading">Loading...</div>



        <script type="text/javascript">

// Developed by Sam Judson, sam@wackylabs.net
// http://www.wackylabs.net
//
// This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License
// http://creativecommons.org/licenses/by-nc-sa/3.0/


$(document).ready(function() {

    // perform initial loading
    justifiedLayout.loadData();

    $("#update").click(justifiedLayout.loadData);

    $("#tags").keyup(function(event){
        if(event.keyCode == 13){
            $("#update").click();
        }
    });

    $("#sort").kendoDropDownList({
        change: justifiedLayout.loadData
    });

});

var justifiedLayout = {};

(function(context) {

    var minWidth = 800;
    var minHeight = 800;

    var lastWidth = 0;
    var photoArray = null;
    var maxPhotos = 30;
    // total number of images appearing in all previous rows
    var baseLine = 0;

    $(window).resize(function() {

        var nowWidth = $("div#picstest").innerWidth();
        if( nowWidth < minWidth ) return;

        // test to see if the window resize is big enough to deserve a reprocess
        if( nowWidth * 1.1 < lastWidth || nowWidth * 0.9 > lastWidth )
        {
            // if so call method
            updateRows();
        }
    });

    context.loadData = function() {
        photoArray = null;
        baseLine = 0;
        maxPhotos = 30;
        $("div#pics").empty();
        $("#loading").show();

        var tags = $("#tags").val();
        var sort = $("#sort").val();
        $.getJSON("https://api.flickr.com/services/rest/",
            {
                method: "flickr.photos.search",
                api_key: "d75b34b1afe5da8c8918eba885038682",
				user_id: "75751316@N00",
				tags: tags,
                tag_mode: "all",
                sort: "date-taken-desc",
                extras: "url_n,url_m,url_z,url_l",
                format: "json",
                per_page: 400,
                nojsoncallback: 1
            },
            function(data, status) {
                photoArray = data.photos.photo;
                updateRows();
                $("#loading").hide();
            }
        );
    };

    var clickHandler = function(photo)
        {
          return function() {
            var url = "https://www.flickr.com/photos/" + photo.owner + "/" + photo.id;
            location.href = url;
          };
        };

    // only call this when either the data is loaded, or the windows resizes by a chunk
    var updateRows = function() {
        lastWidth = $("div#picstest").innerWidth();
        lastWidth = Math.max(lastWidth, minWidth);
        baseLine = 0;
        processPhotos(photoArray);
        $("div.picrow").width(lastWidth);
    };

    var processPhotos = function(photos) {
        if (!photos) return;

        // divs to contain the images
        var d = $("div#pics");
        if( baseLine === 0 ) {
            d.empty();
        }

        // get row width - this is fixed.
        var w = lastWidth;

        // initial height - effectively the maximum height +/- 10%;
        var h = Math.max(minHeight,Math.floor(w / 5));
        // margin width
        var border = 5;

        // store relative widths of all images (scaled to match estimate height above)
        var ws = [];
        $.each(photos, function(key, val) {
            var wt = parseInt(val.width_n, 10);
            var ht = parseInt(val.height_n, 10);
            if( ht != h ) { wt = Math.floor(wt * (h / ht)); }
            ws.push(wt);
        });

        var rowNum = 0;
        var limit = Math.min(maxPhotos, photos.length);

        while(baseLine < limit)
        {
            rowNum++;
            // number of images appearing in this row
            var c = 0;
            // total width of images in this row - including margins
            var tw = 0;

            // calculate width of images and number of images to view in this row.
            while( (tw * 1.1 < w) && (baseLine + c < limit))
            {
                tw += ws[baseLine + c++] + border * 2;
            }

            // skip the last row
            if( baseLine + c >= limit ) return;

            var d_row = $("<div/>", {"class" : "picrow"});
            d.append(d_row);


            // Ratio of actual width of row to total width of images to be used.
            var r = w / tw;

            // image number being processed
            var i = 0;
            // reset total width to be total width of processed images
            tw = 0;
            // new height is not original height * ratio
            var ht = Math.floor(h * r);
            d_row.height(ht + border * 2);

            while( i < c )
            {
                var photo = photos[baseLine + i];
                // Calculate new width based on ratio
                var wt = Math.floor(ws[baseLine + i] * r);
                // add to total width with margins
                tw += wt + border * 2;

                // Create image, set src, width, height and margin
                var purl = photo.url_n;
                if( wt > photo.width_n * 1.2 || ht > photo.height_n * 1.2 ) purl = photo.url_m;
                if( wt > photo.width_m * 1.2 || ht > photo.height_m * 1.2 ) purl = photo.url_z;
                if( wt > photo.width_z * 1.2 || ht > photo.height_z * 1.2 ) purl = photo.url_l;

                var img = $(
                  '<img/>',
                  {
                      "class": "photo",
                      src: purl,
                      width: wt,
                      height: ht
                  }).css("margin", border + "px");

                img.click(clickHandler(photo));
                d_row.append(img);

                i++;
            }

            // set row height to actual height + margins
            baseLine += c;

            // if total width is slightly smaller than
            // actual div width then add 1 to each
            // photo width till they match
            i = 0;
            while( tw < w )
            {
                var img1 = d_row.find("img:nth-child(" + (i + 1) + ")");
                img1.width(img1.width() + 1);
                i = (i + 1) % c;
                tw++;
            }
            // if total width is slightly bigger than
            // actual div width then subtract 1 from each
            // photo width till they match
            i = 0;
            while( tw > w )
            {
                var img2 = d_row.find("img:nth-child(" + (i + 1) + ")");
                img2.width(img2.width() - 1);
                i = (i + 1) % c;
                tw--;
            }

        }
    };

    // levelReached function taken from infiniteScroll jquery plugin
    // https://github.com/holtonma/infini_scroll

    var levelReached = function(){
        // is it low enough to add elements to bottom?
        var pageHeight = Math.max(document.body.scrollHeight ||
        document.body.offsetHeight);
        var viewportHeight = window.innerHeight  ||
        document.documentElement.clientHeight  ||
        document.body.clientHeight || 0;
        var scrollHeight = window.pageYOffset ||
        document.documentElement.scrollTop  ||
        document.body.scrollTop || 0;
        // Trigger for scrolls within 20 pixels from page bottom
        return pageHeight - viewportHeight - scrollHeight < 10;
    };

    var pollLevel = function() {
        if( photoArray && levelReached() )
        {
            maxPhotos = Math.min(maxPhotos+30, 400);
            processPhotos(photoArray);
        }
        setTimeout(pollLevel, 100);
    };

    pollLevel();

})(justifiedLayout);

</script>



</body>

</html>
