
<!DOCTYPE html>

<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ --> 
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
	
<head>
	
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TQBF9JG');</script>
<!-- End Google Tag Manager -->
	
	
  <meta charset="utf-8">

  <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame 
       Remove this if you use the .htaccess -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>Virtual hoarding</title>
  <meta name="description" content="Design portfolio and travel catalogue">
  <meta name="keywords" content="Andrew Day, design, interactive design, integrated marketing, identity, and advertising, Chicago, Illinois, USA"  /> 
  <meta name="author" content="Andrew Day">

  <!--  Mobile viewport optimized: j.mp/bplateviewport -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Place favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
  <link rel="shortcut icon" href="favicon.png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">


        <script src="http://cdn.kendostatic.com/2012.1.322/js/jquery.min.js" type="text/javascript"></script>
        <script src="http://cdn.kendostatic.com/2012.1.322/js/kendo.web.min.js" type="text/javascript"></script>
        <link href="http://cdn.kendostatic.com/2012.1.322/styles/kendo.common.min.css" rel="stylesheet" type="text/css" />
        <link href="http://cdn.kendostatic.com/2012.1.322/styles/kendo.default.min.css" rel="stylesheet" type="text/css" />


  <!-- CSS : implied media="all" -->
  <link rel="stylesheet" href="css/main.css">


  <!-- Uncomment if you are specifically targeting less enabled mobile browsers
  <link rel="stylesheet" media="handheld" href="css/handheld.css?v=2">  -->
 
  <!-- All JavaScript at the bottom, except for Modernizr which enables HTML5 elements & feature detects -->
  <script src="js/libs/modernizr-1.6.min.js"></script>

  <script src="//use.typekit.net/kjy5jrw.js"></script>
  <script>try{Typekit.load();}catch(e){}</script>


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-88343733-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-88343733-1');
</script>



        <style>
        
#container { padding-bottom:0 !important }

        </style>
                
                
    </head>
    
    
    <body>
    
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TQBF9JG"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
	    
    
<div id="container">
  
<header>

<nav>
<ul>
<li class="first"><a href="index.html">Viewfinder</a></li>
<li><a href="chronology.html">Itineraries</a></li>
<li><a href="map.html">Atlas</a></li>
<li><a href="scrapbook.html">S-crap-book</a></li>
<li><a href="cycling.html">Handlebars</a></li>
<li class="last"><a href="http://design.andrewday.com/">Design & UX →</a></li>
</ul>
</nav>


<h1>virtual hoarding of real tchochkes</h1>


</header>




<div id="picmenu">

        <select class="k-select" id="tags">

            <option value="ad-scrapbook,awesome" selected>Faves</option>
            <option value="ad-scrapbook,funny">Ha-ha</option>
	        <option value="ad-scrapbook">Recent</option>
            <option></option>

        <optgroup label="What">
            <option value="ad-scrapbook,advert">Ads</option>
            <option value="ad-scrapbook,comic">Comics</option>
            <option value="ad-scrapbook,map">Maps</option>
            <option value="ad-scrapbook,money">Money</option>
            <option value="ad-scrapbook,newspaper">News</option>
            <option value="ad-scrapbook,certificate">Official business</option>
            <option value="ad-scrapbook,stamp">Philately!</option>
            <option value="ad-scrapbook,photo">Photographs</option>
            <option value="ad-scrapbook,poster">Posters</option>
            <option value="ad-scrapbook,tech">Retro-tech</option>
            <option value="ad-scrapbook,screenprint">Screenprinting</option>
            <option value="ad-scrapbook,souvenir">Tchotchkes</option>
            <option value="ad-scrapbook,transit">Transit</option>
        </optgroup>
            <option></option>

        <optgroup label="Where">
            <option value="ad-scrapbook,ad1998-cathaysia">1998 · Hong Kong, Thailand, Malaysia, Vietnam, Japan</option>
            <option value="ad-scrapbook,ad1999-easyeurope">1999 · Greece, UK, Spain, France</option>
            <option value="ad-scrapbook,ad2001-mercosur">2001 · Brazil, Argentina, Chile, Uruguay</option>
            <option value="ad-scrapbook,ad2001-auldalliance">2001 · UK, France</option>
            <option value="ad-scrapbook,ad2003-warstanbul">2003 · Poland, Czechia, Slovakia, Austria, Hungary, Romania, Bulgaria, Turkey</option>
            <option value="ad-scrapbook,italy">2004 · Italy</option>
            <option value="ad-scrapbook,germany">2004 · Germany</option>
            <option value="ad-scrapbook,ad2006-mediterrabia">2006 · Morocco, Tunisia, Malta, Lebanon, Emirates, Oman, Jordan, Palisraelistine, France</option>
            <option value="ad-scrapbook,ad2006-japan">2006 · Japan</option>
            <option value="ad-scrapbook,mexico">2007 · Mexico</option>
            <option value="ad-scrapbook,india">2008 · India</option>
            <option value="ad-scrapbook,cuba">2009 · Cuba</option>
            <option value="ad-scrapbook,ad2009-costaragua">2009 · Costa Rica, Nicaragua</option>
            <option value="ad-scrapbook,ad2010-baltika">2010 · Finland, Russia, Ukraine, Belarus, Denmark, Norway, Sweden, Estonia, Latvia, Lithuania</option>
            <option value="ad-scrapbook,ad2011-amsterparis">2011 · Netherlands, France</option>
            <option value="ad-scrapbook,ad2011-oktoberfrance">2011 · France, Italy, Switzerland</option>
            <option value="ad-scrapbook,ad2012-iberiaroc">2012 · Spain, Portugal, Morocco</option>
            <option></option>
            <option value="ad-scrapbook,africa">Africa</option>
            <option value="ad-scrapbook,asia">Asia</option>
            <option value="ad-scrapbook,europe">Europe</option>
            <option value="ad-scrapbook,south america">South America</option>
            <option value="ad-scrapbook,north america">Northy America</option>
        </optgroup>
            <option></option>

        <optgroup label="When">
            <option value="ad-scrapbook,1996-2000">1996-2000</option>
            <option value="ad-scrapbook,2001-2005">2001-2005</option>
            <option value="ad-scrapbook,2006-2010">2006-2010</option>
            <option value="ad-scrapbook,2011-2015">2011-2015</option>
        </optgroup>

</select>
        
        <button class="k-button" id="update">yep</button>

</div><!-- end menu -->


</div><!-- container -->


        <div id="picstest"></div>
        
        <div id="pics"></div>
        <div id="loading">Loading...</div>
      
      
      	<div id="credit">Justified image layout by <a href="http://www.wackylabs.net">Sam Judson</a></div>
        
      
        <script type="text/javascript">
		
// Developed by Sam Judson, sam@wackylabs.net
// http://www.wackylabs.net
//
// This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License
// http://creativecommons.org/licenses/by-nc-sa/3.0/
  

$(document).ready(function() {

    // perform initial loading
    justifiedLayout.loadData();
    
    $("#update").click(justifiedLayout.loadData);
    
    $("#tags").keyup(function(event){
        if(event.keyCode == 13){
            $("#update").click();
        }
    });
    
    $("#sort").kendoDropDownList({
        change: justifiedLayout.loadData
    });

});

var justifiedLayout = {};

(function(context) {

    var minWidth = 800;
    var minHeight = 350;
  
    var lastWidth = 0;
    var photoArray = null;
    var maxPhotos = 30;
    // total number of images appearing in all previous rows
    var baseLine = 0;

    $(window).resize(function() {

        var nowWidth = $("div#picstest").innerWidth();
        if( nowWidth < minWidth ) return;
        
        // test to see if the window resize is big enough to deserve a reprocess
        if( nowWidth * 1.1 < lastWidth || nowWidth * 0.9 > lastWidth )
        {
            // if so call method
            updateRows();
        }
    });

    context.loadData = function() {
        photoArray = null;
        baseLine = 0;
        maxPhotos = 30;
        $("div#pics").empty();
        $("#loading").show();
        
        var tags = $("#tags").val();
        var sort = $("#sort").val();
        $.getJSON("https://api.flickr.com/services/rest/",
            {
                method: "flickr.photos.search",
                api_key: "d75b34b1afe5da8c8918eba885038682",
				user_id: "75751316@N00",
                tags: tags,
                tag_mode: "all",
                sort: "date-uploaded-desc",
                extras: "url_n,url_m,url_z,url_l",
                format: "json",
                per_page: 500,
                nojsoncallback: 1
            }, 
            function(data, status) {
                photoArray = data.photos.photo;
                updateRows();
                $("#loading").hide();
            }
        );
    };
  
    var clickHandler = function(photo)
        {
          return function() {
            var url = "https://www.flickr.com/photos/" + photo.owner + "/" + photo.id;
            location.href = url;
          };
        };

    // only call this when either the data is loaded, or the windows resizes by a chunk
    var updateRows = function() {
        lastWidth = $("div#picstest").innerWidth();
        lastWidth = Math.max(lastWidth, minWidth);
        baseLine = 0;
        processPhotos(photoArray);
        $("div.picrow").width(lastWidth);
    };
    
    var processPhotos = function(photos) {
        if (!photos) return;
      
        // divs to contain the images
        var d = $("div#pics");
        if( baseLine === 0 ) {
            d.empty();
        }
        
        // get row width - this is fixed.
        var w = lastWidth;
        
        // initial height - effectively the maximum height +/- 10%;
        var h = Math.max(minHeight,Math.floor(w / 5));
        // margin width
        var border = 5;
        
        // store relative widths of all images (scaled to match estimate height above)
        var ws = [];
        $.each(photos, function(key, val) {
            var wt = parseInt(val.width_n, 10);
            var ht = parseInt(val.height_n, 10);
            if( ht != h ) { wt = Math.floor(wt * (h / ht)); }
            ws.push(wt);
        });
    
        var rowNum = 0;
        var limit = Math.min(maxPhotos, photos.length);
        
        while(baseLine < limit)
        {
            rowNum++;
            // number of images appearing in this row
            var c = 0; 
            // total width of images in this row - including margins
            var tw = 0;
            
            // calculate width of images and number of images to view in this row.
            while( (tw * 1.1 < w) && (baseLine + c < limit))
            {
                tw += ws[baseLine + c++] + border * 2;
            }

            // skip the last row
            if( baseLine + c >= limit ) return;
            
            var d_row = $("<div/>", {"class" : "picrow"});
            d.append(d_row);
            

            // Ratio of actual width of row to total width of images to be used.
            var r = w / tw; 
            
            // image number being processed
            var i = 0;
            // reset total width to be total width of processed images
            tw = 0;
            // new height is not original height * ratio
            var ht = Math.floor(h * r);
            d_row.height(ht + border * 2);

            while( i < c )
            {
                var photo = photos[baseLine + i];
                // Calculate new width based on ratio
                var wt = Math.floor(ws[baseLine + i] * r);
                // add to total width with margins
                tw += wt + border * 2;
              
                // Create image, set src, width, height and margin
                var purl = photo.url_n;
                if( wt > photo.width_n * 1.2 || ht > photo.height_n * 1.2 ) purl = photo.url_m;
                if( wt > photo.width_m * 1.2 || ht > photo.height_m * 1.2 ) purl = photo.url_z;
                if( wt > photo.width_z * 1.2 || ht > photo.height_z * 1.2 ) purl = photo.url_l;
              
                var img = $(
                  '<img/>', 
                  {
                      "class": "photo", 
                      src: purl, 
                      width: wt, 
                      height: ht
                  }).css("margin", border + "px");
              
                img.click(clickHandler(photo));
                d_row.append(img);

                i++;
            }
            
            // set row height to actual height + margins
            baseLine += c;

            // if total width is slightly smaller than 
            // actual div width then add 1 to each 
            // photo width till they match
            i = 0;
            while( tw < w )
            {
                var img1 = d_row.find("img:nth-child(" + (i + 1) + ")");
                img1.width(img1.width() + 1);
                i = (i + 1) % c;
                tw++;
            }
            // if total width is slightly bigger than 
            // actual div width then subtract 1 from each 
            // photo width till they match
            i = 0;
            while( tw > w )
            {
                var img2 = d_row.find("img:nth-child(" + (i + 1) + ")");
                img2.width(img2.width() - 1);
                i = (i + 1) % c;
                tw--;
            }
            
        }
    };

    // levelReached function taken from infiniteScroll jquery plugin
    // https://github.com/holtonma/infini_scroll

    var levelReached = function(){
        // is it low enough to add elements to bottom?
        var pageHeight = Math.max(document.body.scrollHeight ||
        document.body.offsetHeight);
        var viewportHeight = window.innerHeight  ||
        document.documentElement.clientHeight  ||
        document.body.clientHeight || 0;
        var scrollHeight = window.pageYOffset ||
        document.documentElement.scrollTop  ||
        document.body.scrollTop || 0;
        // Trigger for scrolls within 20 pixels from page bottom
        return pageHeight - viewportHeight - scrollHeight < 10;
    };

    var pollLevel = function() {
        if( photoArray && levelReached() )
        {
            maxPhotos = Math.min(maxPhotos+30, 150);
            processPhotos(photoArray);
        }
        setTimeout(pollLevel, 100);
    };
    
    pollLevel();

})(justifiedLayout);

</script>



</body>

</html>


<!--
        <optgroup label="Places">
            <option value="ad-scrapbook,africa">Africa</option>
            <option value="ad-scrapbook,Morocco">- Morocco</option>

            <option value="ad-scrapbook,asia">Asia</option>
            <option value="ad-scrapbook,hong kong">- Hong Kong</option>
            <option value="ad-scrapbook,india">- India</option>
            <option value="ad-scrapbook,japan">- Japan</option>

            <option value="ad-scrapbook,europe">Europe</option>
            <option value="ad-scrapbook,bulgaria">- Bulgaria</option>
            <option value="ad-scrapbook,france">- France</option>
            <option value="ad-scrapbook,germany">- Germany</option>
            <option value="ad-scrapbook,italy">- Italy</option>
            <option value="ad-scrapbook,russia">- Russia</option>
            <option value="ad-scrapbook,spain">- Spain</option>
            <option value="ad-scrapbook,turkey">- Turkey</option>
            <option value="ad-scrapbook,united kingdom">- United Kingdom</option>
            
            <option value="ad-scrapbook,south america">South America</option>
            <option value="ad-scrapbook,brazil">- Brazil</option>
            <option value="ad-scrapbook,argentina">- Argentina</option>
                       
            <option value="">Northy America</option>
            <option value="ad-scrapbook,united states">- USA</option>
            <option value="ad-scrapbook,mexico">- Mexico</option>
            <option value="ad-scrapbook,cuba">- Cuba</option>
        </optgroup>
            <option></option>

-->
